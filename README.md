<p align="center">
  <img height = "70" width = "70" src="https://github.com/AuthentiDocs/authentidocs/blob/main/04_Code/assets/logo.webp" alt= "AuthentiDocs")
</p>

<p align="center"> <h1 align="center"> AuthentiDocs - Team Collaboration Authenticated By Digital Signature </h1> </p>

A simple website for doing collaborative work where each file and interaction is signed digitally!

## Table of Contents

- [General Info](#general-information)
- [Technologies Used](#main-technologies-used)
- [Features](#features)
- [Demonstration](#demonstration)
- [Setup](#setup)
- [Project Status](#project-status)
- [Room for Improvement](#room-for-improvement)
- [Acknowledgements](#acknowledgements)
- [License](#license)

## General Information

This project was our submission for CSE 408 Software Engineering term project in Level 4/Term 1(Senior Year) at BUET CSE Undergrad.

In this project we decided to combine the features of a document signing application with that of a organizational management application, where users can -

- store their personal files with digital signatures
- make multiple organizations with new users
- hierarchically divide organization in teams and threads, with overlap if needed
- create flexible workflows in threads with digitally signe files and notes
- maintain chain of custody of all files, view file history
- discuss informally in thread forums
- send notices
- verify any digital signature with information of the signing user

## Main Technologies Used

<p align="center">
  <img height="50" width="50" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/svelte/svelte-original.svg" /> 
  <img height="50" width="50" src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/vercel/vercel-original.svg" /> 
  <img height="50" width="50" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" />
  <img height="50" width="50" src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/supabase/supabase-original.svg" />      
</p>

**Database:**

- Postgresql hosted in Supabase

**Unified Backend and Frontend:**

- SvelteKit - version 2.4.3 hosted in Vercel.

We used **SvelteKit** because we preferred how Kit allowed rapid development with Svelte and we wanted to use a **RESTful API** in the backend, while keeping the codebase for backend and frontend similar. SvelteKit adds useful functions and file based routing while also creating a separate server for the RESTful API. The [live API documentation](https://authentidocs.vercel.app/docs/api) was created with **Swagger**.

We chose **Vercel for deployment**, for we liked how it could easily integrate with Github, giving a full CI/CD pipeline. Out of many features of Vercel, an interesting one is that of logging every API call - a feature that saved us a lot of headache many times.

We used a **[Github Project](https://github.com/orgs/AuthentiDocs/projects?query=is%3Aopen)** to manage our workflow, using issues and pull requests as needed. Keeping our [main](https://github.com/AuthentiDocs/authentidocs/tree/main) branch push protected, we implemented a **staged deployment** with only successful preview deployments from [testing](https://github.com/AuthentiDocs/authentidocs/tree/testing) being merged into main.

For managing **user authentication** in our project, we used **AuthJS** with user verification using database. For file storage, we used **Supabase File Storage** to host our files.

As digital signature algorithm, we chose **_Elliptic Curve Digital Signature Algorithm_**, using the browser-side **SubtleCrypto** API to create keys, sign and verify signatures. We recreated a users keys at each new log in to allow multiple device for each user and stored the private key in browsers **IndexedDB** as it can provide security for key objectes generated by **SubtleCrypto** APIs.

## Features

After signing up, a user can:

- **Upload and view** personal files that are immediately signed digitally
- **View and update** their profile
- **Create** new organizations and **add members** as needed
- **Create** new teams in the organizations and **add members**
- **Create work threads** in teams to simulate different workflows in a office, users from **multiple teams** are allowed in threads
- **Upload, view, digitally sign and add notes to** work files in a thread
- **Maintain a chain of custody** by using serial of thread members and letting **only one user** signing custody of thread at any time
- **Add passive members** to a thread, who can only view the workflow but cannot participate
- **Forward thread custody** in a **flexible** way to any other member of thread
- **Discuss in a dedicated forum** for each thread
- **View file custody history** for each file
- **Give notice to all members** of organization/team/thread, adding a file if required
- **Receive detailed notifications** about each event that is related to the user
- **Archive thread** after a successful workflow, with comments
- **Have a unified view** of users all work files, organizations, teams etc.
- **View and download** all signatures of a file as a pdf certificate
- **Verify a files signature** and get information about who signed it
- **Search users, organizations, teams, threads and files** with a robust, fault tolerant **full text search**
- **Leave organization** but only after the user has completed any pending workflows in any thread

## Setup

#### Setting up database

Download and extract this [SQL script](https://github.com/AuthentiDocs/authentidocs/blob/main/04_Code/assets/dump-postgres-202403131448.tar.gz) to setup your database in Supabase or locally, using the `\i <script path>` command of Postgresql to run the SQL script.

#### Clone the repo

In a suitable folder, clone the repo:

`git clone https://github.com/AuthentiDocs/authentidocs.git`

#### Install dependencies

`npm install`

#### Dont forget the .env file

Create a file named `.env` and put the needed environment variables:

```
DEV_DB_ANON_LINK="<your development supabase database anon link>"
DEV_DB_ANON_KEY="<your development supabase database anon key>"
PROD_DB_ANON_LINK="<your production supabase database anon link>"
PROD_DB_ANON_KEY="<your production supabase database anon link>"
```

Also, create another file name `.env.local` for **AuthJS** authentication with this value:

```
AUTH_SECRET="<32 bit secret for Authentication>"
```

You can use the same database for production and development if needed.

#### Running locally

`npm run dev` creates a development server, while `npm run build` will build the project for production that can be viewed with `npm run preview`.

#### Deploying

After creating a project and connecting the github repo, **Vercel** will automatically deploy any push in any branch by default. This is customizable and you can add your own conditions for deployment. Populate Vercel project environment variables using the local `.env` file.

## Demonstration

Here is a little **[demo](https://authentidocs.vercel.app)** of the running project with some screenshots below:

<p align="center"> <h4 align="center"> Login, Sign Up and User Dashboard Pages </h4> </p>
<p align ="center">
<img
  src="/04_code/assets/1.png?raw=true"
  alt="Login Page"
  title="Login Page"
  caption="Login Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/2.png?raw=true"
  alt="Signup Page"
  title="Signup Page"
  caption="Signup Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/0.png?raw=true"
  alt="Dashboard Page"
  title="Dashboard Page"
  caption="Dashboard Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center"> Homepage: Personal Files, Organizations, Notices </h4> </p>
<p align ="center">
<img
  src="/04_code/assets/3.png?raw=true"
  alt="Personal Files Page"
  title="Personal Files Page"
  caption="Personal Files Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/4.png?raw=true"
  alt="User Organizations Page"
  title="User Organizations Page"
  caption="User Organizations Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/5.png?raw=true"
  alt="User Notices Page"
  title="User Notices Page"
  caption="User Notices Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center"> Homepage: User Teams Page, User Thread and Search Result Pages </h4> </p>
<p align ="center">
<img
  src="/04_code/assets/6.png?raw=true"
  alt="User Teams Page"
  title="User Teams Page"
  caption="User Teams Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/7.png?raw=true"
  alt="User Thread Page"
  title="User Thread Page"
  caption="User Thread Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/8.png?raw=true"
  alt="User Search Page"
  title="User Search Page"
  caption="User Search Page"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center">Organization Homepage: Details Tab, Member Tab and Notice Tab </h4> </p>
<p align ="center">
<img
  src="/04_code/assets/9.png?raw=true"
  alt="Details"
  title="Details"
  caption="Details"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/10.png?raw=true"
  alt="Members"
  title="Members"
  caption="Members"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/11.png?raw=true"
  alt="Notices"
  title="Notices"
  caption="Notices"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center">Organization Homepage: Adding Member, Team and Notice</h4> </p>
<p align ="center">
<img
  src="/04_code/assets/13.png?raw=true"
  alt="Add Member"
  title="Add Member"
  caption="Add Member"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/14.png?raw=true"
  alt="Add Teams"
  title="Add Teams"
  caption="Add Teams"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/12.png?raw=true"
  alt="Add Notices"
  title="Add Notices"
  caption="Add Notices"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

The team page and tabs are similar to the organization page, so we can skip to thread page now:

<p align="center"> <h4 align="center">Thread Workflow: Homepage, File List, File View</h4> </p>
<p align ="center">
<img
  src="/04_code/assets/15.png?raw=true"
  alt="Thread Home"
  title="Thread Home"
  caption="Thread Home"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/16.png?raw=true"
  alt="Thread File List"
  title="Thread File List"
  caption="Thread File List"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/17.png?raw=true"
  alt="Thread File View"
  title="Thread File View"
  caption="Thread File View"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center">Thread File View: Notes, Custody History, File Certificate</h4> </p>
<p align ="center">
<img
  src="/04_code/assets/18.png?raw=true"
  alt="Notes"
  title="Notes"
  caption="Notes"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/19.png?raw=true"
  alt="Custody History"
  title="Custody History"
  caption="Custody History"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/20.png?raw=true"
  alt="Certificate"
  title="Certificate"
  caption="Certificate"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">

<p align="center"> <h4 align="center">Thread View: Flexible Forwarding, Forum</h4> </p>
<p align ="center">
<img
  src="/04_code/assets/21.png?raw=true"
  alt="Flexible Forward"
  title="Flexible Forward"
  caption="Flexible Forward"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/22.png?raw=true"
  alt="Forum"
  title="Forum"
  caption="Forum"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
<img
  src="/04_code/assets/23.png?raw=true"
  alt="Forum Posts"
  title="Forum Posts"
  caption="Forum Posts"
  style="display: inline-block; margin: 0 auto; width: 32%"/>
</p align="center">


## Project Status

Project is: _being worked on_ .

## Room for Improvement

Room for improvement:

- Use **NodePG** or other more flexible database library for database connection
- Add preivew feature for more types of file in the frontend
- Add provision for user creation/adding by using a service an organization is already using, such as Azure Active Directory
- Possible use of **Rich Text Editor** in forum

## Acknowledgements

We would like to specially give our heartfelt thanks to our honourable supervisor **[Md. Toufikuzzaman sir](https://cse.buet.ac.bd/faculty_list/detail/toufikuzzaman)**. It is his idea of using digital signatures in an office workspace that we had directly followed and tried to develop. Throughout the whole term, he gave us invaluable advice, encouraged us to explore new technologies and helped us overcome many problems. It has been both an honour and a learning experience working under his guidance.

We would also like to express our heartiest gratitude to our other sessional course teachers **[Rayhan Rashed sir](https://cse.buet.ac.bd/faculty_list/detail/rayhan)** and **[Mashiat Mustaq ma'am](https://cse.buet.ac.bd/faculty_list/detail/mashiat)** for the very important guidances and suggestions they gave us throughout the project.

A special shoutout to **[Ashraf](https://github.com/risenfromashes), [Lord Sadat](https://github.com/Sadat-Hossain-01), [Shattik](https://github.com/shattik)** for helping us out anytime we needed. Check out **[Ashraf and company's project](https://github.com/risenfromashes/pixelshare), [Sadat and Asif's project](https://taskflow-2c96.onrender.com/)** and finally **[Shattik and Nafis and Wasif's project using microservices](https://github.com/Shattik/PushtiFrontEnd)**.

## License

This project is licensed under [GNU General Public License v3.0](/LICENSE).
